---
import {CollectionEntry, getCollection} from 'astro:content';
import Head from '../../components/head.astro';
import Header from '../../components/header.astro';
import Footer from '../../components/footer.astro';
import {Image} from '@astrojs/image/components';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map(post => ({
    params: {slug: post.slug},
    props: post,
  }));
}
type Props = CollectionEntry<'blog'>;

const post = Astro.props;
const {data} = post;
const {Content} = await post.render();
---

<html lang="en">
  <head>
    <Head title={data.title} description={data.description} />
    <style>
      .post {
        width: 960px;
        max-width: calc(100% - 2em);
      }
      .post h1 {
        font-size: 3.75rem;
      }
      .post h2 {
        font-size: 2.25rem;
      }
    </style>
  </head>
  <body class="min-h-screen bg-slate-50">
    <Header />
    {
      data.heroImage && (
        <Image
          src={data.heroImage}
          format="avif"
          alt={data.title}
          width={1024}
          height={510}
          aspectRatio={2.0}
          class="overflow-hidden object-cover object-center my-8 rounded-lg mx-auto shadow hover:shadow-2xl transition hover:ease-in"
        />
      )
    }
    <article class="post mx-auto pb-20 pt-8">
      <h1 class="text-6xl font-vietnam_pro text-bold mb-4 text-gray-700">
        {post.data.title}
      </h1>
      <Content />
    </article>
    <Footer />
    <script src="../../js/main.js"></script>
  </body>
</html>
