---
import {getCollection} from 'astro:content';
import Head from '../../components/head.astro';
import Header from '../../components/header.astro';
import Footer from '../../components/footer.astro';
import Post from '../../components/post.astro';
import {SITE_TITLE, SITE_DESCRIPTION} from '../../constants';

const posts = (await getCollection('blog')).sort(
  (a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf(),
);
---

<html lang="es">
  <head>
    <Head title={SITE_TITLE} description={SITE_DESCRIPTION} />
  </head>
  <body class="min-h-screen bg-slate-50">
    <Header />
    <main class="container mx-auto p-4">
      <section
        class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-36 my-20 text-">
        {
          posts.map(post => (
            <Post
              url={post.slug}
              title={post.data.title}
              description={post.data.description}
              heroImage={post.data.heroImage}
              author={post.data.author}
              pubDate={post.data.pubDate}
            />
          ))
        }
      </section>
    </main>
    <Footer />
  </body>
</html>
