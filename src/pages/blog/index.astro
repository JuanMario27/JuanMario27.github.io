---
import {getCollection} from 'astro:content';
import Head from '../../components/head.astro';
import Header from '../../components/header.astro';
import Footer from '../../components/footer.astro';
import Post from '../../components/post.astro';
import Loader from '../../components/loader.astro';
import Whatsapp from '../../components/whatsapp.astro';
import {SITE_TITLE, SITE_DESCRIPTION} from '../../constants';

const posts = (await getCollection('blog')).sort(
  (a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf(),
);
---

<html lang="es">
  <head>
    <Head title={SITE_TITLE} description={SITE_DESCRIPTION} />
  </head>
  <body class="min-h-screen bg-slate-50">
    <Loader />
    <Header />
    <div class="relative overflow-hidden h-[200px] bg-image bg-no-repeat bg-cover flex items-center" style="background-image: url('./blog.jpg')">
      <div class="container mx-auto px-4">
        <h2 class="text-white font-vietnam_pro font-extrabold text-4xl uppercase">Blog</h2>
      </div>
    </div>
    <main class="container mx-auto p-4">
      <section
        class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-36 my-20 text-">
        {
          posts.map(post => (
            <Post
              url={post.slug}
              title={post.data.title}
              description={post.data.description}
              heroImage={post.data.heroImage}
              author={post.data.author}
              pubDate={post.data.pubDate}
            />
          ))
        }
      </section>
    </main>
    <Footer />
    <Whatsapp />
  </body>
</html>
